@model IEnumerable<ApexVolley.Models.Match>

@{
    ViewData["Title"] = "Gestione Partite";
    var canCreate = User.IsInRole("Staff") || User.IsInRole("Admin");
}

<h1 class="mb-4 text-light fw-bold">Le nostre partite</h1>

@if (canCreate)
{
    <div class="mb-4">
        <a class="btn btn-outline-primary px-4 py-2" asp-action="Create">+ Nuova Partita</a>
    </div>
}

<style>
    body {
    color: #e0e0e0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .table-wrapper {
    background-color: #1e1e1e;
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    overflow-x: auto;
    }

    table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 0.75rem;
    }

    thead th {
    color: #aaaaaa;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    border-bottom: 1px solid #333;
    padding-bottom: 0.5rem;
    text-align: left;
    }

    tbody tr {
    background-color: #1a1a1a;
    transition: background 0.2s ease;
    }

    tbody tr:hover {
    background-color: #2a2a2a;
    }

    tbody td {
    padding: 0.75rem;
    border-bottom: 1px solid #2e2e2e;
    vertical-align: middle;
    }

    td.text-center {
    text-align: center;
    }

    .btn-sm {
    font-size: 0.75rem;
    padding: 4px 10px;
    border-radius: 6px;
    }

    .btn-action {
    background-color: transparent;
    color: #6ea8fe;
    border: 1px solid #2f3e55;
    transition: background 0.2s ease;
    }

    .btn-action:hover {
    background-color: #1c2b3f;
    color: #fff;
    }

    .btn-danger {
    color: #f87171;
    border-color: #f87171;
    }

    .btn-danger:hover {
    background-color: #3b1d1d;
    }

    .btn-warning {
    color: #facc15;
    border-color: #facc15;
    }

    .btn-warning:hover {
    background-color: #3a320b;
    }
</style>

<div class="table-wrapper">
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Avversari</th>
                <th>Luogo</th>
                <th class="text-center">Set 1</th>
                <th class="text-center">Set 2</th>
                <th class="text-center">Set 3</th>
                <th class="text-center">Risultato</th>
                @if (canCreate)
                {
                    <th class="text-center">Azioni</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var match in Model)
            {
                <tr>
                    <td>@match.Data.ToString("dd/MM/yyyy")</td>
                    <td>@match.Avversari</td>
                    <td>@match.Luogo</td>
                    <td class="text-center">@match.RisultatoSet1</td>
                    <td class="text-center">@match.RisultatoSet2</td>
                    <td class="text-center">@match.RisultatoSet3</td>
                    <td class="text-center">@match.Risultato</td>
                    @if (canCreate){
                    <td class="text-center">
                        <div class="d-flex gap-2 justify-content-center">
                                <a asp-action="Edit" asp-route-id="@match.Id" class="btn btn-sm btn-warning">Modifica</a>
                                <a asp-action="Delete" asp-route-id="@match.Id" class="btn btn-sm btn-danger">Elimina</a>
                        </div>
                    </td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>
